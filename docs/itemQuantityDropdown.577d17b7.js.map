{"version":3,"sources":["itemQuantityDropdown/itemQuantityDropdown.js"],"names":["numNameChange","quantity","nameList","quantityMod","changeHeadline","currentMode","$","closest","data","itemQuantity","thisItemQuantity","itemName","retuenedName","numBedroom","numBed","numBathroom","find","each","html","children","toLowerCase","startsWith","slice","prop","css","String","prototype","Object","defineProperty","value","search","rawPos","pos","substring","length","document","ready","listToggle","hiddenList","minusButton","currentQuantity","call","siblings","click","slideToggle","varQuantity"],"mappings":"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","file":"itemQuantityDropdown.577d17b7.js","sourceRoot":"..\\src","sourcesContent":["if (!String.prototype.startsWith) {\r\n    Object.defineProperty(String.prototype, 'startsWith', {\r\n        value: function(search, rawPos) {\r\n            var pos = rawPos > 0 ? rawPos|0 : 0;\r\n            return this.substring(pos, pos + search.length) === search;\r\n        }\r\n    });\r\n}\r\n\r\n\r\n\r\nfunction numNameChange(quantity, nameList) {\r\n    let quantityMod = 0;\r\n    quantityMod = quantity % 10;\r\n        if (!quantity) {\r\n            return('');\r\n        }\r\n\r\n        if (quantity > 10 && quantity < 21) { \r\n            return(nameList[2]); \r\n        } else {\r\n            // if (varQuantity1 > 1 && varQuantity1 < 5) { nameQ=' гостя'; }\r\n            if (quantityMod == 1) {\r\n                return(nameList[0]);\r\n            } else {\r\n                if(quantityMod > 1 && quantityMod < 5){\r\n                    return (nameList[1]);\r\n                } else {\r\n                    return(nameList[2]);\r\n                }\r\n            }\r\n        }\r\n    \r\n}\r\n\r\nfunction changeHeadline() {\r\n    let currentMode = $(this).closest('.itemQuantityDropdown').data('mode'); //current \"script\" mode\r\n    let itemQuantity = 0; //summ all lists items quantity\r\n    let thisItemQuantity = 0; //current item quantity\r\n    // let itemQuantityMod = 0;\r\n    let itemName = ''; //special variation of name for current item quantity\r\n    let retuenedName='';\r\n\r\n    let numNamesGuest = [' гость',' гостя',' гостей'];\r\n    let numBedroom = [' спальня', ' спальни', ' спален'];\r\n    let numBed = [' кровать', ' кровати', ' кроватей'];\r\n    let numBathroom = [' ванная комната', ' ванные комнаты', ' ванных комнат'];\r\n\r\n    $(this).closest('.itemQuantityDropdown').find('.itemQuantityDropdown__currentQuantity').each(function(){\r\n        itemQuantity = itemQuantity+(+$(this).html());        \r\n    });\r\n\r\n\r\n    if(currentMode == 'eachItems'){\r\n        if(itemQuantity) {\r\n            retuenedName='';\r\n            $(this).closest('.itemQuantityDropdown').find('.itemQuantityDropdown__menuOption').each(function() {              \r\n                thisItemQuantity = +$(this).children('.itemQuantityDropdown__currentQuantity').html();\r\n                // itemQuantity\r\n                // alert(thisItemQuantity);\r\n                itemName = $(this).children('.itemQuantityDropdown__item').html();\r\n                // alert(itemName);\r\n                if(itemName.toLowerCase().startsWith(\"спал\")){\r\n                    // alert(itemName);    \r\n                    itemName = numNameChange(thisItemQuantity,numBedroom);    \r\n                }\r\n                if(itemName.toLowerCase().startsWith(\"кров\")) {\r\n                    itemName = numNameChange(thisItemQuantity,numBed);    \r\n                }\r\n                if(itemName.toLowerCase().startsWith(\"ванн\")) {\r\n                    itemName = numNameChange(thisItemQuantity,numBathroom);    \r\n                }\r\n                if (thisItemQuantity) {\r\n                    retuenedName = retuenedName + thisItemQuantity + itemName + ', ';\r\n                }\r\n            });\r\n            retuenedName = retuenedName.slice(0,-2);\r\n            $(this).closest('.itemQuantityDropdown').find('.itemQuantityDropdown__selection').html(retuenedName);\r\n        }\r\n        else {\r\n            $(this).closest('.itemQuantityDropdown').find('.itemQuantityDropdown__selection').html('Выберите удобства');\r\n        }\r\n    }\r\n    else {\r\n\r\n        retuenedName = numNameChange(itemQuantity,numNamesGuest);\r\n\r\n\r\n        $(this).closest('.itemQuantityDropdown').find('.itemQuantityDropdown__selection').html(itemQuantity+retuenedName);\r\n\r\n        if (itemQuantity == 0) {\r\n            $(this).closest('.itemQuantityDropdown').find('.itemQuantityDropdown__selection').html('Сколько гостей');\r\n\r\n            $(this).closest('.itemQuantityDropdown__dropdownMenu').find('.itemQuantityDropdown__controlButton--minus').prop('disabled',true);\r\n            $(this).closest('.itemQuantityDropdown__dropdownMenu').find('.itemQuantityDropdown__clearButton').css(\"display\",\"none\");\r\n        } else {\r\n            $(this).closest('.itemQuantityDropdown__dropdownMenu').find('.itemQuantityDropdown__clearButton').css(\"display\",\"block\");\r\n        }\r\n    }\r\n}\r\n\r\n$(document).ready(function(){\r\n    let listToggle = '.itemQuantityDropdown__toggle';\r\n    let hiddenList = '.itemQuantityDropdown__dropdownMenu';\r\n\r\n    let plusButton = '.itemQuantityDropdown__controlButton--plus';\r\n    let minusButton = '.itemQuantityDropdown__controlButton--minus';\r\n    let currentQuantity ='.itemQuantityDropdown__currentQuantity';\r\n\r\n    $(this).find('.itemQuantityDropdown__dropdownMenu').each(function(){\r\n        changeHeadline.call(this);\r\n\r\n        $(this).find(currentQuantity).each(function(){\r\n            if(!(+$(this).html())) {\r\n                $(this).siblings(minusButton).prop('disabled',true);\r\n            }\r\n            else {\r\n                $(this).siblings(minusButton).prop('disabled',false);\r\n            }\r\n        });\r\n    });\r\n\r\n    $(listToggle).click(function(){\r\n        // $(this).siblings(hiddenList).toggleClass('visually-hidden');\r\n        $(this).siblings(hiddenList).slideToggle('fast');\r\n    });\r\n\r\n    $(plusButton).click(function(){\r\n        let varQuantity = 0;\r\n\r\n        varQuantity = +$(this).siblings(currentQuantity).html();\r\n        varQuantity++;\r\n        $(this).siblings(currentQuantity).html(varQuantity);\r\n        if(varQuantity) {\r\n            $(this).siblings(minusButton).prop('disabled',false);\r\n        }\r\n\r\n        changeHeadline.call(this);\r\n        \r\n    });\r\n\r\n    $(minusButton).click(function(){\r\n        let varQuantity = 0;\r\n\r\n        varQuantity = +$(this).siblings(currentQuantity).html();\r\n        if(varQuantity) {\r\n            varQuantity--;\r\n            $(this).siblings(currentQuantity).html(varQuantity);\r\n        }\r\n        if(!varQuantity) {\r\n            $(this).prop('disabled',true);\r\n        }\r\n\r\n        changeHeadline.call(this);\r\n        // alert(varQuantity);\r\n    });\r\n\r\n    $('.itemQuantityDropdown__applyButton').click(function(){\r\n        $(this).closest(hiddenList).slideToggle('fast');\r\n    });\r\n\r\n    $('.itemQuantityDropdown__clearButton').click(function(){\r\n        $(this).closest(hiddenList).find(currentQuantity).html(0);\r\n        changeHeadline.call(this);\r\n    });\r\n\r\n});\r\n"]}